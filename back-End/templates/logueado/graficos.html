{% extends 'base-log.html'%}

{% block body %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/graficos.css') }}">
<title>Gráficos</title>

<style>
    .filtros-container {
        background: rgba(255, 255, 255, 0.1);
        padding: 15px 20px;
        border-radius: 8px;
        margin-bottom: 20px;
        display: flex;
        flex-wrap: wrap;
        gap: 20px;
        align-items: center;
    }

    .filtro-grupo {
        display: flex;
        align-items: center;
        gap: 10px;
    }

    .filtro-grupo label {
        color: #fff;
        font-weight: 500;
    }

    .filtro-grupo input[type="radio"] {
        margin-right: 5px;
    }

    .filtro-grupo input[type="date"],
    .filtro-grupo select {
        padding: 8px 12px;
        border-radius: 4px;
        border: 1px solid #444;
        background: #222;
        color: #fff;
    }

    .filtro-grupo select {
        min-width: 120px;
    }

    .btn-filtrar {
        background: #28a745;
        color: white;
        border: none;
        padding: 10px 20px;
        border-radius: 4px;
        cursor: pointer;
        font-weight: 600;
    }

    .btn-filtrar:hover {
        background: #218838;
    }

    .oculto {
        display: none !important;
    }
</style>

<div class="graficos-container">
    <h1>Informacion de la empresa</h1>
    <p>Visualización de estadísticas</p>

    <hr>

    <!-- Controles de Filtro -->
    <div class="filtros-container">
        <div class="filtro-grupo">
            <label>Filtrar por:</label>
            <label><input type="radio" name="tipoFiltro" value="anual" checked> Total</label>
            <label><input type="radio" name="tipoFiltro" value="mes"> Por Mes</label>
            <label><input type="radio" name="tipoFiltro" value="rango"> Rango de Fechas</label>
        </div>

        <!-- Selector de año (visible siempre excepto en rango) -->
        <div class="filtro-grupo" id="filtroAnio">
            <label>Año:</label>
            <select id="selectAnio">
                <option value="">Todos</option>
            </select>
        </div>

        <!-- Selector de mes (solo visible cuando se elige "Por Mes") -->
        <div class="filtro-grupo oculto" id="filtroMes">
            <label>Mes:</label>
            <select id="selectMes">
                <option value="1">Enero</option>
                <option value="2">Febrero</option>
                <option value="3">Marzo</option>
                <option value="4">Abril</option>
                <option value="5">Mayo</option>
                <option value="6">Junio</option>
                <option value="7">Julio</option>
                <option value="8">Agosto</option>
                <option value="9">Septiembre</option>
                <option value="10">Octubre</option>
                <option value="11">Noviembre</option>
                <option value="12">Diciembre</option>
            </select>
        </div>

        <!-- Rango de fechas (solo visible cuando se elige "Rango de Fechas") -->
        <div class="filtro-grupo oculto" id="filtroRango">
            <label>Desde:</label>
            <input type="date" id="fechaDesde">
            <label>Hasta:</label>
            <input type="date" id="fechaHasta">
        </div>

        <button class="btn-filtrar" id="btnFiltrar">Aplicar Filtro</button>
    </div>

    <section class="cols-2">
        <figure>
            <h2>Comparativa ventas segun razas</h2>
            <div style="height: 350px; position: relative;">
                <canvas id="modelsChart"></canvas>
            </div>
        </figure>
    </section>

    <section class="cols-1">
        <figure>
            <h2>Ventas por año</h2>
            <canvas id="yearsChart" height="300px"></canvas>
        </figure>
    </section>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.7.0/chart.min.js"></script>
<script src="{{ url_for('static', filename='js/grafico.js') }}"></script>
{% endblock %}